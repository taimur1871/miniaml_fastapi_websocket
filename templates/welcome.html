<!DOCTYPE html>
<html>
<title>Websocket Tests</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">


<body>
<!-- !PAGE CONTENT! -->
<div class="w3-content" style="max-width:1500px">

<!-- Header -->
<header class="w3-panel w3-center w3-opacity" style="padding:32px 32px">
  <h1 class="w3-xlarge">Websocket_Testing</h1>
</header>

<!-- Photo Grid -->
<div class="w3-row-padding" style="margin-bottom:64px">
  <div class="w3-half" style="margin-bottom:32px">
    <h3>Activate_WS</h3>
          <input type="button" value="Activate" onclick="createWs()">
        </form>
    <div>
  </div>     
</div>

<div class="w3-half" style="margin-bottom:32px">
    <h3>WebSocket Chat</h3>
        <form action="" onsubmit="sendMessage(event)">
            <input type="text" id="messageText" autocomplete="off"/>
            <button>Send</button>
        </form>
    <script>
        function createWs(){
            var ws = new WebSocket("ws://localhost:8000/ws")            
            ws.onmessage = function(event) {
            var messages = document.getElementById('messages')
            var message = document.createElement('li')
            var content = document.createTextNode(event.data)
            message.appendChild(content)
            messages.appendChild(message)
            };
        };

        function sendMessage(event) {
            var input = document.getElementById("messageText")
            ws.send(input.value)
            input.value = ''
            event.preventDefault()
        }
    </script>
</div>
</body>
</html>